"use strict";(self.webpackChunkpro_metronome=self.webpackChunkpro_metronome||[]).push([[378],{378:(e,t,r)=>{r.r(t),r.d(t,{default:()=>B});var n=r(5043),a=r(3336),o=r(6446),i=r(5865),s=r(3845),c=r(2110),l=r(6494),d=r(4194),u=r(611),h=r(8911),x=r(1906),m=r(9508),p=r(7392),g=r(4605),f=r(7843),b=r(6240),y=r(9662),j=r(579);const A=(0,y.A)((0,j.jsx)("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart"),v=(0,y.A)((0,j.jsx)("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline"),w=(0,y.A)((0,j.jsx)("path",{d:"M19 11h-1.7c0 .74-.16 1.43-.43 2.05l1.23 1.23c.56-.98.9-2.09.9-3.28m-4.02.17c0-.06.02-.11.02-.17V5c0-1.66-1.34-3-3-3S9 3.34 9 5v.18zM4.27 3 3 4.27l6.01 6.01V11c0 1.66 1.33 3 2.99 3 .22 0 .44-.03.65-.08l1.66 1.66c-.71.33-1.5.52-2.31.52-2.76 0-5.3-2.1-5.3-5.1H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c.91-.13 1.77-.45 2.54-.9L19.73 21 21 19.73z"}),"MicOff");var M=r(5237);const C=(0,y.A)((0,j.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh");var k=r(4593),S=r(909);const B=n.memo(()=>{const e=(0,b.A)(),{setBpm:t}=(0,S.Ay)(),r=(0,n.useRef)(null),y=(0,n.useRef)(null),B=(0,n.useRef)(null),P=(0,n.useRef)(null),R=(0,n.useRef)(null),I=(0,n.useRef)(null),z=(0,n.useRef)(0),L=(0,n.useRef)([]),D=(0,n.useRef)([]),F=(0,n.useRef)([]),q=(0,n.useRef)(null),E=(0,n.useRef)([]),W=(0,n.useRef)(.01),[N,T]=(0,n.useState)(!1),[H,U]=(0,n.useState)(null),[O,V]=(0,n.useState)(0),[G,X]=(0,n.useState)(0),[_,Y]=(0,n.useState)(!1),[Z,$]=(0,n.useState)(null),[J,K]=(0,n.useState)([]),[Q,ee]=(0,n.useState)(""),[te,re]=(0,n.useState)([]),[ne,ae]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(!N)return;const e=setInterval(()=>{const e=Date.now();H&&O>.3&&re(t=>{const r=[...t,{timestamp:e,bpm:H,confidence:O}],n=e-6e4;return r.filter(e=>e.timestamp>n)})},1e3);return()=>clearInterval(e)},[N,H,O]);const oe=(0,n.useCallback)((e,t,r)=>{if(!e||0===e.length||!t)return[];const n=Math.sqrt(e.reduce((e,t)=>e+t*t,0)/e.length),a=Math.max(...e.map(Math.abs)),o=Math.floor(60*t.length/22050),i=Math.floor(5e3*t.length/22050),s=t.slice(o,i),c=s.reduce((e,t)=>e+t,0)/s.length;let l=0;if(q.current){const e=q.current.slice(o,i);l=s.reduce((t,r,n)=>{const a=r-(e[n]||0);return t+Math.max(0,a)},0)/s.length}q.current=[...t];const d=.3*n+.2*a+.3*c+.2*l;if(D.current.push(d),F.current.push(l),D.current.length>50&&(D.current.shift(),F.current.shift()),D.current.length<15)return ee("Building analysis history: ".concat(D.current.length,"/15")),[];const u=D.current.slice(-20),h=u.reduce((e,t)=>e+t,0)/u.length,x=u.reduce((e,t)=>e+Math.pow(t-h,2),0)/u.length,m=Math.sqrt(x),p=h+1.5*m;W.current=.9*W.current+.1*p;const g=d>W.current,f=l>F.current.slice(-10).reduce((e,t)=>e+t,0)/10*1.8,b=a>2*h;ee("Energy: ".concat(d.toFixed(4),", Flux: ").concat(l.toFixed(4),", Threshold: ").concat(W.current.toFixed(4),", Peak: ").concat(a.toFixed(4)));const y=[];if(g&&(f||b)){const e=r;e-z.current>150?(y.push(e),z.current=e,ee("\ud83e\udd41 BEAT! Energy: ".concat(d.toFixed(4),", Flux: ").concat(l.toFixed(4),", Peak: ").concat(a.toFixed(4)))):ee("Beat filtered: ".concat(e-z.current,"ms since last"))}return y},[]),ie=(0,n.useCallback)(e=>{if(0===e.length)return null;if(e.forEach(e=>{L.current.push(e)}),L.current.length>12&&(L.current=L.current.slice(-12)),L.current.length<4)return ee(e=>e+" | Need more beats: ".concat(L.current.length,"/4")),null;const t=[];for(let g=1;g<L.current.length;g++)t.push(L.current[g]-L.current[g-1]);const r=[...t].sort((e,t)=>e-t)[Math.floor(t.length/2)],n=.3*r,a=t.filter(e=>{const t=Math.abs(e-r);return e>300&&e<1e3&&t<n});if(a.length<3)return ee(e=>e+" | Not enough consistent intervals: ".concat(a.length,"/3")),null;let o=0,i=0;a.forEach((e,t)=>{const r=Math.pow(1.2,t);o+=e*r,i+=r});const s=o/i,c=6e4/s;E.current.push(c),E.current.length>8&&E.current.shift();const l=E.current.slice(-5),d=l.reduce((e,t)=>e+t,0)/l.length,u=a.reduce((e,t)=>e+Math.pow(t-s,2),0)/a.length,h=l.reduce((e,t)=>e+Math.pow(t-d,2),0)/l.length,x=Math.sqrt(u),m=Math.sqrt(h),p=.6*Math.max(0,1-x/(.8*s))+.4*Math.max(0,1-m/(.15*d));return ee("BPM: ".concat(d.toFixed(1)," (raw: ").concat(c.toFixed(1),"), Confidence: ").concat((100*p).toFixed(1),"%, Intervals: ").concat(a.length,", StdDev: ").concat(x.toFixed(0),"ms")),{bpm:Math.round(d),confidence:p}},[]),se=(0,n.useCallback)(()=>{if(!y.current||!P.current||!N)return;const e=y.current,r=P.current;e.getFloatTimeDomainData(r);const n=new Float32Array(e.frequencyBinCount);e.getFloatFrequencyData(n);const a=n.map(e=>Math.pow(10,e/20)),o=Math.sqrt(r.reduce((e,t)=>e+t*t,0)/r.length),i=Math.max(...r.map(Math.abs)),s=Math.max(80*o,40*i);X(Math.min(1,s));const c=Date.now(),l=oe(r,a,c);if(l.length>0){K(e=>[...e.slice(-10),...l].slice(-10));const e=ie(l);e&&e.bpm>=60&&e.bpm<=200&&(U(e.bpm),V(e.confidence),_&&e.confidence>.6&&t(e.bpm))}},[oe,ie,_,t,N]);(0,n.useEffect)(()=>(N&&!I.current?I.current=setInterval(se,50):!N&&I.current&&(clearInterval(I.current),I.current=null),()=>{I.current&&(clearInterval(I.current),I.current=null)}),[N,se]);const ce=()=>{I.current&&(clearInterval(I.current),I.current=null),R.current&&cancelAnimationFrame(R.current),B.current&&(B.current.getTracks().forEach(e=>e.stop()),B.current=null),r.current&&(r.current.close(),r.current=null),y.current=null,P.current=null,T(!1),X(0),U(null),V(0),K([]),re([]),ee("Stopped listening"),z.current=0,L.current=[],D.current=[],F.current=[],q.current=null,E.current=[],W.current=.01},le=n.memo(()=>{if(te.length<2)return(0,j.jsxs)(a.A,{elevation:1,sx:{p:3,backgroundColor:e.palette.background.default,mb:3},children:[(0,j.jsx)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2},children:(0,j.jsxs)(i.A,{variant:"h6",color:"primary",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,j.jsx)(A,{}),"BPM Stream Monitor"]})}),(0,j.jsx)(o.A,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center",border:"2px dashed ".concat(e.palette.divider),borderRadius:2,backgroundColor:e.palette.action.hover},children:(0,j.jsx)(i.A,{variant:"body1",color:"text.secondary",textAlign:"center",children:N?"\ud83c\udfb5 Start playing beats to see the BPM stream graph...":"\ud83d\udcca Click 'Start Listening' to begin BPM monitoring"})})]});const t=300,r=50,n=800,c=200,l=te.map(e=>e.bpm),d=Math.max(60,Math.min(...l)-15),u=Math.min(200,Math.max(...l)+15),h=u-d,x=Date.now(),m=x-6e4,p=e=>(e-m)/6e4*n,g=e=>c-(e-d)/h*c,f=te.filter(e=>e.timestamp>=m).map((e,t)=>{const n=p(e.timestamp),a=g(e.bpm);return"".concat(0===t?"M":"L"," ").concat(n+r," ").concat(a+r)}).join(" "),b=te.filter(e=>e.timestamp>=m).map((e,t)=>{const n=p(e.timestamp),a=g(d),o=g(d+e.confidence*h*.3);return 0===t?"M ".concat(n+r," ").concat(a+r," L ").concat(n+r," ").concat(o+r):"L ".concat(n+r," ").concat(o+r)}).join(" "),y=te[te.length-1],v=p(y.timestamp),w=b+" L ".concat(v+r," ").concat(g(d)+r," Z");return(0,j.jsxs)(a.A,{elevation:2,sx:{p:3,backgroundColor:e.palette.background.default,mb:3},children:[(0,j.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,j.jsxs)(i.A,{variant:"h6",color:"primary",sx:{display:"flex",alignItems:"center",gap:1},children:[(0,j.jsx)(A,{}),"Live BPM Stream Monitor"]}),(0,j.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,j.jsxs)(i.A,{variant:"body2",color:"text.secondary",children:[te.length," data points"]}),(0,j.jsx)(s.A,{label:"".concat(H||"--"," BPM"),color:"primary",variant:"filled",size:"medium",sx:{fontWeight:"bold"}})]})]}),(0,j.jsx)(o.A,{sx:{display:"flex",justifyContent:"center",mb:2},children:(0,j.jsxs)("svg",{width:900,height:t,style:{border:"2px solid ".concat(e.palette.divider),borderRadius:"8px",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[1]},children:[(0,j.jsx)("defs",{children:(0,j.jsx)("pattern",{id:"grid",width:"50",height:"25",patternUnits:"userSpaceOnUse",children:(0,j.jsx)("path",{d:"M 50 0 L 0 0 0 25",fill:"none",stroke:e.palette.divider,strokeWidth:"0.5",opacity:"0.4"})})}),(0,j.jsx)("rect",{width:n,height:c,x:r,y:r,fill:"url(#grid)"}),b&&(0,j.jsx)("path",{d:w,fill:e.palette.primary.main,fillOpacity:"0.15",stroke:"none"}),(0,j.jsx)("path",{d:f,fill:"none",stroke:e.palette.primary.main,strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),te.filter(e=>e.timestamp>=m).map((t,n)=>(0,j.jsx)("circle",{cx:p(t.timestamp)+r,cy:g(t.bpm)+r,r:"3",fill:t.confidence>.8?e.palette.success.main:t.confidence>.6?e.palette.warning.main:e.palette.error.main,stroke:e.palette.background.paper,strokeWidth:"2"},t.timestamp)),(0,j.jsx)("text",{x:35,y:55,textAnchor:"end",fontSize:"14",fill:e.palette.text.secondary,fontWeight:"bold",children:u}),(0,j.jsx)("text",{x:35,y:245,textAnchor:"end",fontSize:"14",fill:e.palette.text.secondary,fontWeight:"bold",children:d}),(0,j.jsx)("text",{x:35,y:155,textAnchor:"end",fontSize:"13",fill:e.palette.text.secondary,children:Math.round((d+u)/2)}),H&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("line",{x1:r,y1:g(H)+r,x2:850,y2:g(H)+r,stroke:e.palette.secondary.main,strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.8"}),(0,j.jsxs)("text",{x:860,y:g(H)+r+4,fontSize:"12",fill:e.palette.secondary.main,fontWeight:"bold",children:[H," BPM"]})]}),(0,j.jsx)("text",{x:r,y:285,fontSize:"13",fill:e.palette.text.secondary,fontWeight:"bold",children:"-60s"}),(0,j.jsx)("text",{x:450,y:285,textAnchor:"middle",fontSize:"12",fill:e.palette.text.secondary,children:"-30s"}),(0,j.jsx)("text",{x:850,y:285,textAnchor:"end",fontSize:"13",fill:e.palette.text.secondary,fontWeight:"bold",children:"now"}),(0,j.jsx)("text",{x:20,y:150,textAnchor:"middle",fontSize:"14",fill:e.palette.text.secondary,fontWeight:"bold",transform:"rotate(-90, 20, ".concat(150,")"),children:"BPM"})]})}),(0,j.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[(0,j.jsxs)(o.A,{sx:{display:"flex",gap:3},children:[(0,j.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,j.jsx)(o.A,{sx:{width:16,height:3,backgroundColor:e.palette.primary.main,borderRadius:1}}),(0,j.jsx)(i.A,{variant:"caption",children:"BPM Line"})]}),(0,j.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,j.jsx)(o.A,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:e.palette.success.main}}),(0,j.jsx)(i.A,{variant:"caption",children:"High Confidence"})]}),(0,j.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,j.jsx)(o.A,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:e.palette.warning.main}}),(0,j.jsx)(i.A,{variant:"caption",children:"Medium"})]}),(0,j.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:.5},children:[(0,j.jsx)(o.A,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:e.palette.error.main}}),(0,j.jsx)(i.A,{variant:"caption",children:"Low"})]})]}),(0,j.jsxs)(o.A,{sx:{display:"flex",gap:2},children:[(0,j.jsxs)(i.A,{variant:"caption",color:"text.secondary",children:[(0,j.jsx)("strong",{children:"Avg:"})," ",te.length>0?Math.round(te.reduce((e,t)=>e+t.bpm,0)/te.length):"--"," BPM"]}),(0,j.jsxs)(i.A,{variant:"caption",color:"text.secondary",children:[(0,j.jsx)("strong",{children:"Range:"})," ",te.length>0?"".concat(Math.min(...l),"-").concat(Math.max(...l)):"--"]})]})]}),(0,j.jsx)(o.A,{sx:{p:1.5,backgroundColor:e.palette.action.hover,borderRadius:1},children:(0,j.jsxs)(i.A,{variant:"body2",color:"text.secondary",textAlign:"center",children:[(0,j.jsx)("strong",{children:"Current BPM:"})," ",H||"--"," |",(0,j.jsx)("strong",{children:" Confidence:"})," ",Math.round(100*O),"% |",(0,j.jsx)("strong",{children:" 60s Average:"})," ",te.length>0?Math.round(te.reduce((e,t)=>e+t.bpm,0)/te.length):"--"," BPM |",(0,j.jsx)("strong",{children:" Stability:"})," ",E.current.length,"/5 beats |",(0,j.jsx)("strong",{children:" Data Points:"})," ",te.length,"/60"]})})]})});return(0,n.useEffect)(()=>()=>{ce()},[]),(0,j.jsxs)(o.A,{sx:{width:"100%"},children:[ne&&(0,j.jsx)(le,{}),(0,j.jsx)(c.A,{elevation:3,sx:{mt:2},children:(0,j.jsxs)(l.A,{children:[(0,j.jsxs)(i.A,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,j.jsx)(v,{}),"Live BPM Detector"]}),Z&&(0,j.jsx)(d.A,{severity:"error",sx:{mb:2},children:Z}),(0,j.jsxs)(o.A,{sx:{textAlign:"center",mb:2},children:[(0,j.jsx)(i.A,{variant:"h3",sx:{fontWeight:"bold",color:e.palette.primary.main},children:H||"--"}),(0,j.jsx)(i.A,{variant:"body1",color:"text.secondary",children:"Current BPM"}),O>0&&(0,j.jsxs)(o.A,{sx:{mt:1,maxWidth:400,mx:"auto"},children:[(0,j.jsxs)(i.A,{variant:"body2",color:"text.secondary",children:["Confidence: ",Math.round(100*O),"%",E.current.length>0&&" | Stability: ".concat(E.current.length,"/5")]}),(0,j.jsx)(u.A,{variant:"determinate",value:100*O,sx:{mt:.5,height:6,borderRadius:3,"& .MuiLinearProgress-bar":{backgroundColor:O>.8?e.palette.success.main:O>.6?e.palette.warning.main:e.palette.error.main}}})]})]}),(0,j.jsxs)(o.A,{sx:{mb:2},children:[(0,j.jsx)(i.A,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Audio Input Level"}),(0,j.jsx)(u.A,{variant:"determinate",value:100*G,sx:{height:8,borderRadius:4,backgroundColor:e.palette.grey[300],"& .MuiLinearProgress-bar":{backgroundColor:G>.8?e.palette.error.main:G>.5?e.palette.warning.main:e.palette.success.main}}}),(0,j.jsx)(i.A,{variant:"caption",color:"text.secondary",sx:{fontSize:"0.7rem",opacity:.8},children:G>.1?"\ud83c\udfb5 Audio detected":"\ud83d\udd07 No audio - try playing louder"})]}),(0,j.jsxs)(h.A,{direction:"row",spacing:2,justifyContent:"center",sx:{mb:2},flexWrap:"wrap",children:[(0,j.jsxs)(x.A,{variant:N?"outlined":"contained",color:N?"error":"primary",startIcon:N?(0,j.jsx)(w,{}):(0,j.jsx)(M.A,{}),onClick:N?ce:async()=>{try{if($(null),ee("Requesting microphone access..."),!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("getUserMedia is not supported in this browser");const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!1,noiseSuppression:!1,autoGainControl:!1,sampleRate:44100,channelCount:1}});ee("Microphone access granted, initializing audio..."),B.current=e;const t=new(window.AudioContext||window.webkitAudioContext)({sampleRate:44100});r.current=t,"suspended"===t.state&&(await t.resume(),ee("Audio context resumed"));const n=t.createAnalyser();n.fftSize=2048,n.smoothingTimeConstant=.1,n.minDecibels=-90,n.maxDecibels=-10,y.current=n,P.current=new Float32Array(n.fftSize);t.createMediaStreamSource(e).connect(n),ee("Audio initialized. Sample rate: ".concat(t.sampleRate,"Hz, FFT size: ").concat(n.fftSize)),T(!0),ee("Audio processing started. Start playing!"),z.current=0,L.current=[],D.current=[],F.current=[],q.current=null,E.current=[],W.current=.01}catch(e){console.error("Error starting audio:",e);let t="Could not access microphone. ";"NotAllowedError"===e.name?t+="Please allow microphone access and try again.":"NotFoundError"===e.name?t+="No microphone found. Please connect a microphone.":"NotSupportedError"===e.name?t+="Your browser does not support audio input.":t+=e.message,$(t),ee("Error: ".concat(e.message))}},size:"large",children:[N?"Stop":"Start"," Listening"]}),(0,j.jsx)(m.A,{title:"Reset Detection",children:(0,j.jsx)(p.A,{onClick:()=>{U(null),V(0),K([]),re([]),ee("Detection reset"),z.current=0,L.current=[],D.current=[],F.current=[],q.current=null,E.current=[],W.current=.01},color:"primary",children:(0,j.jsx)(C,{})})}),N&&(0,j.jsx)(x.A,{variant:"outlined",onClick:()=>{const e=Date.now(),t=[e];K(e=>[...e.slice(-10),...t].slice(-10)),L.current.push(e),L.current.length>8&&(L.current=L.current.slice(-8));const r=ie(t);r&&(U(r.bpm),V(r.confidence)),ee("\ud83e\uddea Test beat added at ".concat(e," (Total beats: ").concat(L.current.length,")"))},size:"small",color:"secondary",children:"Test Beat"}),H&&(0,j.jsx)(x.A,{variant:"outlined",startIcon:(0,j.jsx)(k.A,{}),onClick:()=>{H&&(t(H),ee("Synced BPM ".concat(H," to metronome")))},disabled:!H,children:"Sync to Metronome"})]}),(0,j.jsx)(o.A,{sx:{mb:2},children:(0,j.jsxs)(h.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,j.jsx)(g.A,{control:(0,j.jsx)(f.A,{checked:_,onChange:e=>Y(e.target.checked),color:"primary"}),label:"Auto-sync to metronome"}),(0,j.jsx)(g.A,{control:(0,j.jsx)(f.A,{checked:ne,onChange:e=>ae(e.target.checked),color:"primary"}),label:"Show BPM graph"})]})}),Q&&(0,j.jsx)(d.A,{severity:"info",sx:{mb:2},children:(0,j.jsxs)(i.A,{variant:"caption",children:["Debug: ",Q]})}),J.length>0&&(0,j.jsxs)(a.A,{elevation:1,sx:{p:2,backgroundColor:e.palette.background.default,mb:2},children:[(0,j.jsxs)(i.A,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:["\ud83e\udd41 Beats Detected: ",J.length]}),(0,j.jsx)(o.A,{sx:{display:"flex",flexWrap:"wrap",gap:1,mt:1},children:J.slice(-10).map((t,r)=>(0,j.jsx)(s.A,{label:"".concat(r+1),size:"small",color:r===J.length-1?"primary":"default",sx:{animation:r===J.length-1?"pulse 0.8s ease-in-out":"none","@keyframes pulse":{"0%":{transform:"scale(1)",backgroundColor:e.palette.primary.main},"50%":{transform:"scale(1.3)",backgroundColor:e.palette.secondary.main},"100%":{transform:"scale(1)",backgroundColor:e.palette.primary.main}}}},t))}),(0,j.jsxs)(i.A,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Latest beat: ",J.length>0?new Date(J[J.length-1]).toLocaleTimeString():"None"]})]}),(0,j.jsxs)(d.A,{severity:"info",sx:{mt:2},children:[(0,j.jsx)(i.A,{variant:"body2",children:(0,j.jsx)("strong",{children:"Enhanced Beat Detection with Real-Time Graph:"})}),(0,j.jsxs)(i.A,{variant:"caption",component:"div",sx:{mt:1},children:['1. Click "Start Listening" and allow microphone access',(0,j.jsx)("br",{}),"2. Start playing with consistent beats (drums, claps, or metronome)",(0,j.jsx)("br",{}),"3. Watch audio level respond - green is optimal",(0,j.jsx)("br",{}),"4. BPM appears after 4+ consistent beats with confidence bar",(0,j.jsx)("br",{}),"5. ",(0,j.jsx)("strong",{children:"Real-time graph above"})," shows BPM changes over the last 60 seconds",(0,j.jsx)("br",{}),"6. Color-coded dots show detection confidence (green/yellow/red)"]}),(0,j.jsx)(i.A,{variant:"body2",sx:{mt:1},children:(0,j.jsx)("strong",{children:"Graph Features:"})}),(0,j.jsxs)(i.A,{variant:"caption",component:"div",children:["\u2022 ",(0,j.jsx)("strong",{children:"Live Updates:"})," Graph updates every second with new BPM data",(0,j.jsx)("br",{}),"\u2022 ",(0,j.jsx)("strong",{children:"Confidence Visualization:"})," Dot colors indicate detection quality",(0,j.jsx)("br",{}),"\u2022 ",(0,j.jsx)("strong",{children:"Current BPM Line:"})," Dashed line shows current detected BPM",(0,j.jsx)("br",{}),"\u2022 ",(0,j.jsx)("strong",{children:"Statistics:"})," Shows average BPM and range over 60 seconds",(0,j.jsx)("br",{}),"\u2022 ",(0,j.jsx)("strong",{children:"Confidence Area:"})," Light blue area shows overall confidence",(0,j.jsx)("br",{}),"\u2022 ",(0,j.jsx)("strong",{children:"Toggle Control:"}),' Use "Show BPM graph" switch to hide/show']})]})]})})]})})},611:(e,t,r)=>{r.d(t,{A:()=>T});var n=r(7528),a=r(8587),o=r(8168),i=r(5043),s=r(8387),c=r(8610),l=r(3290),d=r(7266),u=r(875),h=r(6803),x=r(4535),m=r(8206),p=r(2532),g=r(2372);function f(e){return(0,g.Ay)("MuiLinearProgress",e)}(0,p.A)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var b,y,j,A,v,w,M=r(579);const C=["className","color","value","valueBuffer","variant"];let k,S,B,P,R,I;const z=(0,l.i7)(k||(k=b||(b=(0,n.A)(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"])))),L=(0,l.i7)(S||(S=y||(y=(0,n.A)(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"])))),D=(0,l.i7)(B||(B=j||(j=(0,n.A)(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"])))),F=(e,t)=>"inherit"===t?"currentColor":e.vars?e.vars.palette.LinearProgress["".concat(t,"Bg")]:"light"===e.palette.mode?(0,d.a)(e.palette[t].main,.62):(0,d.e$)(e.palette[t].main,.5),q=(0,x.Ay)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t["color".concat((0,h.A)(r.color))],t[r.variant]]}})(e=>{let{ownerState:t,theme:r}=e;return(0,o.A)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:F(r,t.color)},"inherit"===t.color&&"buffer"!==t.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===t.variant&&{backgroundColor:"transparent"},"query"===t.variant&&{transform:"rotate(180deg)"})}),E=(0,x.Ay)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.dashed,t["dashedColor".concat((0,h.A)(r.color))]]}})(e=>{let{ownerState:t,theme:r}=e;const n=F(r,t.color);return(0,o.A)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===t.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(n," 0%, ").concat(n," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},(0,l.AH)(P||(P=A||(A=(0,n.A)(["\n    animation: "," 3s infinite linear;\n  "]))),D)),W=(0,x.Ay)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t["barColor".concat((0,h.A)(r.color))],("indeterminate"===r.variant||"query"===r.variant)&&t.bar1Indeterminate,"determinate"===r.variant&&t.bar1Determinate,"buffer"===r.variant&&t.bar1Buffer]}})(e=>{let{ownerState:t,theme:r}=e;return(0,o.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===t.color?"currentColor":(r.vars||r).palette[t.color].main},"determinate"===t.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===t.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})},e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,l.AH)(R||(R=v||(v=(0,n.A)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]))),z)}),N=(0,x.Ay)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.bar,t["barColor".concat((0,h.A)(r.color))],("indeterminate"===r.variant||"query"===r.variant)&&t.bar2Indeterminate,"buffer"===r.variant&&t.bar2Buffer]}})(e=>{let{ownerState:t,theme:r}=e;return(0,o.A)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==t.variant&&{backgroundColor:"inherit"===t.color?"currentColor":(r.vars||r).palette[t.color].main},"inherit"===t.color&&{opacity:.3},"buffer"===t.variant&&{backgroundColor:F(r,t.color),transition:"transform .".concat(4,"s linear")})},e=>{let{ownerState:t}=e;return("indeterminate"===t.variant||"query"===t.variant)&&(0,l.AH)(I||(I=w||(w=(0,n.A)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]))),L)}),T=i.forwardRef(function(e,t){const r=(0,m.b)({props:e,name:"MuiLinearProgress"}),{className:n,color:i="primary",value:l,valueBuffer:d,variant:x="indeterminate"}=r,p=(0,a.A)(r,C),g=(0,o.A)({},r,{color:i,variant:x}),b=(e=>{const{classes:t,variant:r,color:n}=e,a={root:["root","color".concat((0,h.A)(n)),r],dashed:["dashed","dashedColor".concat((0,h.A)(n))],bar1:["bar","barColor".concat((0,h.A)(n)),("indeterminate"===r||"query"===r)&&"bar1Indeterminate","determinate"===r&&"bar1Determinate","buffer"===r&&"bar1Buffer"],bar2:["bar","buffer"!==r&&"barColor".concat((0,h.A)(n)),"buffer"===r&&"color".concat((0,h.A)(n)),("indeterminate"===r||"query"===r)&&"bar2Indeterminate","buffer"===r&&"bar2Buffer"]};return(0,c.A)(a,f,t)})(g),y=(0,u.I)(),j={},A={bar1:{},bar2:{}};if("determinate"===x||"buffer"===x)if(void 0!==l){j["aria-valuenow"]=Math.round(l),j["aria-valuemin"]=0,j["aria-valuemax"]=100;let e=l-100;y&&(e=-e),A.bar1.transform="translateX(".concat(e,"%)")}else 0;if("buffer"===x)if(void 0!==d){let e=(d||0)-100;y&&(e=-e),A.bar2.transform="translateX(".concat(e,"%)")}else 0;return(0,M.jsxs)(q,(0,o.A)({className:(0,s.A)(b.root,n),ownerState:g,role:"progressbar"},j,{ref:t},p,{children:["buffer"===x?(0,M.jsx)(E,{className:b.dashed,ownerState:g}):null,(0,M.jsx)(W,{className:b.bar1,ownerState:g,style:A.bar1}),"determinate"===x?null:(0,M.jsx)(N,{className:b.bar2,ownerState:g,style:A.bar2})]}))})}}]);
//# sourceMappingURL=378.bcf2a630.chunk.js.map