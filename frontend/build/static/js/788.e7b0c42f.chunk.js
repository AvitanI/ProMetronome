"use strict";(self.webpackChunkpro_metronome=self.webpackChunkpro_metronome||[]).push([[788],{788:(e,t,a)=>{a.r(t),a.d(t,{default:()=>V});var s=a(5043),r=a(344),i=a(2110),n=a(6494),l=a(6446),o=a(5865),c=a(4194),d=a(4669),m=a(4056),x=a(1906),h=a(8903),p=a(5721),u=a(4628),j=a(8734),A=a(3845),g=a(8266),y=a(7392),b=a(9336),v=a(2153),f=a(8124),k=a(4593),S=a(7795),M=a(1781),w=a(4496),B=a(1387),P=a(6240),T=a(909),D=a(9379),z=a(3193),W=a(9190),C=a(598),L=a(2143),K=a(8911),N=a(108),R=a(5748),H=a(7734),F=a(2185),I=a(760),E=a(5899),O=a(2310),Y=a(2291),_=a(6028),G=a(6992),Q=a(6102),q=a(7869),J=a(579);const U=()=>{const e=(0,P.A)(),{sessions:t}=(0,T.Ay)(),[a,r]=s.useState("practice-time"),[c,d]=s.useState("all"),m=(0,s.useMemo)(()=>{if("all"===c)return t;const e=new Date,a=new Date;switch(c){case"week":a.setDate(e.getDate()-7);break;case"month":a.setMonth(e.getMonth()-1);break;case"3months":a.setMonth(e.getMonth()-3);break;default:return t}return t.filter(e=>new Date(e.date)>=a)},[t,c]),x=(0,s.useMemo)(()=>{if(0===m.length)return[];switch(a){case"practice-time":return m.map((e,t)=>({session:t+1,date:new Date(e.date).toLocaleDateString(),practiceTime:Math.round(e.duration/6e4),averageBpm:e.averageBpm}));case"bpm-progress":return m.map((e,t)=>({session:t+1,date:new Date(e.date).toLocaleDateString(),averageBpm:e.averageBpm,minBpm:e.bpmRange.min,maxBpm:e.bpmRange.max}));case"daily-summary":const e={};return m.forEach(t=>{const a=new Date(t.date).toLocaleDateString();e[a]||(e[a]={date:a,totalTime:0,sessionCount:0,avgBpm:0,bpmSum:0}),e[a].totalTime+=t.duration,e[a].sessionCount+=1,e[a].bpmSum+=t.averageBpm}),Object.values(e).map(e=>(0,D.A)((0,D.A)({},e),{},{totalTime:Math.round(e.totalTime/6e4),avgBpm:Math.round(e.bpmSum/e.sessionCount)}));case"bpm-distribution":const t={"60-80":0,"81-100":0,"101-120":0,"121-140":0,"141-160":0,"161-180":0,"181+":0};return m.forEach(e=>{const a=e.averageBpm;a<=80?t["60-80"]++:a<=100?t["81-100"]++:a<=120?t["101-120"]++:a<=140?t["121-140"]++:a<=160?t["141-160"]++:a<=180?t["161-180"]++:t["181+"]++}),Object.entries(t).map(e=>{let[t,a]=e;return{range:t,count:a,percentage:Math.round(a/m.length*100)}});default:return[]}},[m,a]),p=[e.palette.primary.main,e.palette.secondary.main,e.palette.error.main,e.palette.warning.main,e.palette.info.main,e.palette.success.main,e.palette.primary.light],u=e=>{let{active:t,payload:a,label:s}=e;return t&&a&&a.length?(0,J.jsxs)(i.A,{elevation:3,sx:{p:1},children:[(0,J.jsx)(o.A,{variant:"body2",sx:{fontWeight:600},children:s}),a.map((e,t)=>(0,J.jsxs)(o.A,{variant:"body2",sx:{color:e.color},children:[e.name,": ",e.value,e.name.includes("Time")&&" min",e.name.includes("Bpm")&&" BPM"]},t))]}):null};return 0===t.length?(0,J.jsxs)(l.A,{sx:{textAlign:"center",py:4},children:[(0,J.jsx)(o.A,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"No Progress Data Yet"}),(0,J.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Start practicing to see your progress charts and analytics."})]}):(0,J.jsxs)(l.A,{sx:{width:"100%"},children:[(0,J.jsxs)(h.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,J.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,J.jsxs)(z.A,{fullWidth:!0,size:"small",children:[(0,J.jsx)(W.A,{children:"Chart Type"}),(0,J.jsxs)(C.A,{value:a,onChange:e=>r(e.target.value),label:"Chart Type",children:[(0,J.jsx)(L.A,{value:"practice-time",children:"Practice Time Progress"}),(0,J.jsx)(L.A,{value:"bpm-progress",children:"BPM Progress"}),(0,J.jsx)(L.A,{value:"daily-summary",children:"Daily Summary"}),(0,J.jsx)(L.A,{value:"bpm-distribution",children:"BPM Distribution"})]})]})}),(0,J.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,J.jsxs)(z.A,{fullWidth:!0,size:"small",children:[(0,J.jsx)(W.A,{children:"Time Range"}),(0,J.jsxs)(C.A,{value:c,onChange:e=>d(e.target.value),label:"Time Range",children:[(0,J.jsx)(L.A,{value:"all",children:"All Time"}),(0,J.jsx)(L.A,{value:"week",children:"Last Week"}),(0,J.jsx)(L.A,{value:"month",children:"Last Month"}),(0,J.jsx)(L.A,{value:"3months",children:"Last 3 Months"})]})]})})]}),(0,J.jsxs)(K.A,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap"},children:["practice-time"===a&&(0,J.jsx)(A.A,{label:"Shows practice time per session",size:"small",color:"primary",variant:"outlined"}),"bpm-progress"===a&&(0,J.jsx)(A.A,{label:"Shows BPM progression over time",size:"small",color:"primary",variant:"outlined"}),"daily-summary"===a&&(0,J.jsx)(A.A,{label:"Shows total practice time per day",size:"small",color:"primary",variant:"outlined"}),"bpm-distribution"===a&&(0,J.jsx)(A.A,{label:"Shows BPM range distribution",size:"small",color:"primary",variant:"outlined"})]}),(0,J.jsx)(i.A,{elevation:2,children:(0,J.jsxs)(n.A,{children:[(0,J.jsxs)(o.A,{variant:"h6",sx:{mb:2,textAlign:"center"},children:["practice-time"===a&&"Practice Time Progress","bpm-progress"===a&&"BPM Progress Over Time","daily-summary"===a&&"Daily Practice Summary","bpm-distribution"===a&&"BPM Range Distribution"]}),(()=>{if(0===x.length)return(0,J.jsx)(l.A,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,J.jsx)(o.A,{variant:"body1",color:"text.secondary",children:"No data available for the selected time range"})});switch(a){case"practice-time":return(0,J.jsx)(N.u,{width:"100%",height:300,children:(0,J.jsxs)(R.b,{data:x,children:[(0,J.jsx)(H.d,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,J.jsx)(F.W,{dataKey:"session",stroke:e.palette.text.secondary,tick:{fontSize:12}}),(0,J.jsx)(I.h,{stroke:e.palette.text.secondary,tick:{fontSize:12}}),(0,J.jsx)(E.m,{content:(0,J.jsx)(u,{})}),(0,J.jsx)(O.N,{type:"monotone",dataKey:"practiceTime",stroke:e.palette.primary.main,strokeWidth:3,dot:{fill:e.palette.primary.main,strokeWidth:2,r:4},name:"Practice Time"})]})});case"bpm-progress":return(0,J.jsx)(N.u,{width:"100%",height:300,children:(0,J.jsxs)(R.b,{data:x,children:[(0,J.jsx)(H.d,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,J.jsx)(F.W,{dataKey:"session",stroke:e.palette.text.secondary,tick:{fontSize:12}}),(0,J.jsx)(I.h,{stroke:e.palette.text.secondary,tick:{fontSize:12}}),(0,J.jsx)(E.m,{content:(0,J.jsx)(u,{})}),(0,J.jsx)(O.N,{type:"monotone",dataKey:"averageBpm",stroke:e.palette.primary.main,strokeWidth:3,dot:{fill:e.palette.primary.main,strokeWidth:2,r:4},name:"Average BPM"}),(0,J.jsx)(O.N,{type:"monotone",dataKey:"maxBpm",stroke:e.palette.secondary.main,strokeWidth:2,strokeDasharray:"5 5",dot:{fill:e.palette.secondary.main,strokeWidth:2,r:3},name:"Max BPM"})]})});case"daily-summary":return(0,J.jsx)(N.u,{width:"100%",height:300,children:(0,J.jsxs)(Y.E,{data:x,children:[(0,J.jsx)(H.d,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,J.jsx)(F.W,{dataKey:"date",stroke:e.palette.text.secondary,tick:{fontSize:12},angle:-45,textAnchor:"end",height:60}),(0,J.jsx)(I.h,{stroke:e.palette.text.secondary,tick:{fontSize:12}}),(0,J.jsx)(E.m,{content:(0,J.jsx)(u,{})}),(0,J.jsx)(_.y,{dataKey:"totalTime",fill:e.palette.primary.main,name:"Total Time",radius:[4,4,0,0]})]})});case"bpm-distribution":return(0,J.jsx)(N.u,{width:"100%",height:300,children:(0,J.jsxs)(G.r,{children:[(0,J.jsx)(Q.F,{data:x.filter(e=>e.count>0),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{range:t,percentage:a}=e;return"".concat(t," (").concat(a,"%)")},outerRadius:80,fill:"#8884d8",dataKey:"count",children:x.map((e,t)=>(0,J.jsx)(q.f,{fill:p[t%p.length]},"cell-".concat(t)))}),(0,J.jsx)(E.m,{content:(0,J.jsx)(u,{})})]})});default:return null}})()]})}),m.length>0&&(0,J.jsx)(i.A,{elevation:1,sx:{mt:2},children:(0,J.jsxs)(n.A,{children:[(0,J.jsx)(o.A,{variant:"h6",sx:{mb:2},children:"Quick Insights"}),(0,J.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,J.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,J.jsxs)(l.A,{sx:{textAlign:"center"},children:[(0,J.jsx)(o.A,{variant:"h4",color:"primary.main",children:m.length}),(0,J.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Sessions"})]})}),(0,J.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,J.jsxs)(l.A,{sx:{textAlign:"center"},children:[(0,J.jsxs)(o.A,{variant:"h4",color:"primary.main",children:[Math.round(m.reduce((e,t)=>e+t.duration,0)/6e4),"m"]}),(0,J.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Total Time"})]})}),(0,J.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,J.jsxs)(l.A,{sx:{textAlign:"center"},children:[(0,J.jsx)(o.A,{variant:"h4",color:"primary.main",children:Math.round(m.reduce((e,t)=>e+t.averageBpm,0)/m.length)}),(0,J.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Avg BPM"})]})}),(0,J.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,J.jsxs)(l.A,{sx:{textAlign:"center"},children:[(0,J.jsxs)(o.A,{variant:"h4",color:"primary.main",children:[Math.round(m.reduce((e,t)=>e+t.duration,0)/(6e4*m.length)),"m"]}),(0,J.jsx)(o.A,{variant:"body2",color:"text.secondary",children:"Avg Session"})]})})]})]})})]})},V=s.memo(()=>{const e=(0,P.A)(),t=(0,r.A)(e.breakpoints.down("sm")),[a,D]=(0,s.useState)(0),{sessions:z,clearHistory:W,deleteSession:C,getHistoryStats:L,generateSampleData:K}=(0,T.Ay)();console.log("History component - sessions:",z);const N=(0,s.useMemo)(()=>L(),[z,L]),R=(0,s.useCallback)(e=>{const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},[]),H=(0,s.useCallback)(e=>{const t=Math.floor(e/6e4),a=Math.floor(e%6e4/1e3);return"".concat(t,"m ").concat(a,"s")},[]),F=(0,s.useCallback)(t=>{let{icon:a,title:s,value:r,subtitle:c}=t;return(0,J.jsx)(i.A,{elevation:2,sx:{height:"100%",background:"linear-gradient(135deg, ".concat(e.palette.background.paper," 0%, ").concat(e.palette.background.default," 100%)"),border:"1px solid ".concat(e.palette.divider)},children:(0,J.jsxs)(n.A,{sx:{textAlign:"center",py:3},children:[(0,J.jsx)(l.A,{sx:{color:e.palette.primary.main,mb:1},children:a}),(0,J.jsx)(o.A,{variant:"h4",sx:{fontWeight:700,color:e.palette.primary.main,mb:1},children:r}),(0,J.jsx)(o.A,{variant:"body1",sx:{fontWeight:600,color:e.palette.text.primary,mb:.5},children:s}),c&&(0,J.jsx)(o.A,{variant:"caption",sx:{color:e.palette.text.secondary},children:c})]})})},[e]),I=(0,s.useMemo)(()=>z.slice().reverse(),[z]);return 0===z.length?(0,J.jsx)(l.A,{sx:{width:"100%",maxWidth:600,mx:"auto",p:2},children:(0,J.jsxs)(c.A,{severity:"info",sx:{mb:3,"& .MuiAlert-message":{width:"100%",textAlign:"center"}},children:[(0,J.jsx)(o.A,{variant:"h6",sx:{mb:1},children:"No Practice History Yet"}),(0,J.jsx)(o.A,{variant:"body2",children:"Start practicing with the metronome to track your sessions and see detailed statistics about your practice time and BPM usage."})]})}):(0,J.jsxs)(l.A,{sx:{width:"100%",maxWidth:800,mx:"auto",p:2},children:[(0,J.jsx)(i.A,{elevation:2,sx:{mb:3},children:(0,J.jsxs)(d.A,{value:a,onChange:(e,t)=>D(t),variant:t?"scrollable":"standard",centered:!t,scrollButtons:!!t&&"auto",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root":{minHeight:56,fontSize:{xs:"0.875rem",sm:"0.95rem"},fontWeight:600,textTransform:"none",minWidth:{xs:"auto",sm:160},px:{xs:1,sm:2}},"& .MuiTabs-scrollButtons":{"&.Mui-disabled":{opacity:.3}}},children:[(0,J.jsx)(m.A,{icon:(0,J.jsx)(v.A,{}),label:"Progress Charts",iconPosition:"start"}),(0,J.jsx)(m.A,{icon:(0,J.jsx)(f.A,{}),label:"Session History",iconPosition:"start"})]})}),0===a&&(0,J.jsx)(U,{}),1===a&&(0,J.jsx)(J.Fragment,{children:0===z.length?(0,J.jsxs)(c.A,{severity:"info",sx:{mb:3,"& .MuiAlert-message":{width:"100%",textAlign:"center"}},children:[(0,J.jsx)(o.A,{variant:"h6",sx:{mb:1},children:"No Practice History Yet"}),(0,J.jsx)(o.A,{variant:"body2",children:"Start practicing with the metronome to track your sessions and see detailed statistics about your practice time and BPM usage."}),(0,J.jsx)(x.A,{variant:"outlined",onClick:K,sx:{mt:2},size:"small",children:"Generate Sample Data (For Demo)"})]}):(0,J.jsxs)(J.Fragment,{children:[(0,J.jsxs)(h.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,J.jsx)(h.Ay,{item:!0,xs:12,sm:4,children:(0,J.jsx)(F,{icon:(0,J.jsx)(k.A,{sx:{fontSize:32}}),title:"Total Sessions",value:N.totalSessions})}),(0,J.jsx)(h.Ay,{item:!0,xs:12,sm:4,children:(0,J.jsx)(F,{icon:(0,J.jsx)(S.A,{sx:{fontSize:32}}),title:"Total Practice",value:N.totalPracticeTimeFormatted})}),(0,J.jsx)(h.Ay,{item:!0,xs:12,sm:4,children:(0,J.jsx)(F,{icon:(0,J.jsx)(M.A,{sx:{fontSize:32}}),title:"Average BPM",value:N.averageBpm})})]}),(0,J.jsx)(i.A,{elevation:2,children:(0,J.jsxs)(n.A,{children:[(0,J.jsxs)(l.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,J.jsx)(o.A,{variant:"h6",sx:{fontWeight:600},children:"Practice Sessions"}),(0,J.jsx)(x.A,{startIcon:(0,J.jsx)(w.A,{}),onClick:W,size:"small",color:"error",variant:"outlined",children:"Clear All"})]}),(0,J.jsx)(p.A,{children:I.map((e,a)=>(0,J.jsxs)(s.Fragment,{children:[(0,J.jsxs)(u.Ay,{sx:{px:0,py:2,flexDirection:t?"column":"row",alignItems:t?"flex-start":"center"},children:[(0,J.jsx)(j.A,{primary:(0,J.jsxs)(l.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,J.jsx)(o.A,{variant:"body1",sx:{fontWeight:600},children:R(e.date)}),(0,J.jsxs)(l.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,J.jsx)(A.A,{label:"".concat(H(e.duration)),size:"small",color:"primary",variant:"outlined"}),(0,J.jsx)(A.A,{label:"Avg: ".concat(e.averageBpm," BPM"),size:"small",color:"secondary",variant:"outlined"}),(0,J.jsx)(A.A,{label:"".concat(e.bpmRange.min,"-").concat(e.bpmRange.max," BPM"),size:"small",variant:"outlined"}),(0,J.jsx)(A.A,{label:e.timeSignature,size:"small",variant:"outlined"}),"None"!==e.subdivision&&(0,J.jsx)(A.A,{label:e.subdivision,size:"small",variant:"outlined"})]})]}),primaryTypographyProps:{component:"div"}}),(0,J.jsx)(g.A,{children:(0,J.jsx)(y.A,{edge:"end",onClick:()=>C(e.id),size:"small",color:"error",children:(0,J.jsx)(B.A,{})})})]}),a<I.length-1&&(0,J.jsx)(b.A,{})]},e.id))})]})})]})})]})})}}]);
//# sourceMappingURL=788.e7b0c42f.chunk.js.map