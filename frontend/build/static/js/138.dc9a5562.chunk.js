"use strict";(self.webpackChunkpro_metronome=self.webpackChunkpro_metronome||[]).push([[138],{6138:(e,t,r)=>{r.r(t),r.d(t,{default:()=>re});var i=r(9379),n=r(5043),o=r(344),a=r(2110),s=r(6494),l=r(6446),c=r(5865),d=r(9508),u=r(4010),m=r(5795),p=r(1787),h=r(7392),x=r(4194),g=r(5721),A=r(4628),b=r(8734),f=r(8911),v=r(3845),y=r(8266),j=r(9336),w=r(35),S=r(6600),C=r(5316),k=r(3193),P=r(9190),M=r(598),L=r(2143),z=r(9347),T=r(1906),_=r(4489),B=r(8403),D=r(141),R=r(9484),I=r(79),W=r(7795),E=r(4593),U=r(3560),F=r(1387),N=r(6240),O=r(909),H=r(1637),Q=r(3851),q=r(1045),G=r(7121),V=r(3369),Y=r(5456),J=r(3564),K=r(1781),X=r(1209),Z=r(8606);const $=new class{constructor(){this.backendURL="https://prometronome-api-1751789304.azurewebsites.net/api",this.fallbackToDemo=!0}async searchSongs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{const i=await fetch("".concat(this.backendURL,"/music/search?query=").concat(encodeURIComponent(e),"&limit=").concat(t,"&offset=").concat(r),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors"});if(!i.ok)throw new Error("HTTP error! status: ".concat(i.status));const n=await i.json();return{songs:n.songs.map(e=>({id:e.id,title:e.title,artist:e.artist,album:e.album,duration:e.duration?Math.floor(e.duration/1e3):null,preview_url:e.previewUrl,artwork:e.artworkUrl,genre:e.genre,bpm:e.bpm,explicit:e.isExplicit,popularity:e.popularity,spotify_url:e.spotifyUrl,audio_features:e.audioFeatures})),total:n.total,hasMore:n.total>r+t}}catch(i){if(console.warn("Backend API unavailable, using demo mode:",i.message),this.fallbackToDemo)return this.getMockSearchResults(e);throw i}}async getSongById(e){try{const t=await fetch("".concat(this.backendURL,"/music/song/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},mode:"cors"});if(!t.ok){if(404===t.status)return null;throw new Error("HTTP error! status: ".concat(t.status))}const r=await t.json();return{id:r.id,title:r.title,artist:r.artist,album:r.album,duration:r.duration?Math.floor(r.duration/1e3):null,preview_url:r.previewUrl,artwork:r.artworkUrl,genre:r.genre,bpm:r.bpm,explicit:r.isExplicit,popularity:r.popularity,spotify_url:r.spotifyUrl,audio_features:r.audioFeatures}}catch(t){if(console.warn("Backend API unavailable for song details:",t.message),this.fallbackToDemo&&e.startsWith("demo"))return this.getMockSongById(e);throw t}}async checkHealth(){try{return(await fetch("".concat(this.backendURL,"/music/health"),{method:"GET",timeout:3e3})).ok}catch(e){return!1}}getMockSearchResults(e){const t=e.toLowerCase(),r=[{id:"demo_blinding_lights",title:"Blinding Lights",artist:"The Weeknd",album:"After Hours",genre:"Pop",bpm:171,duration:200,preview_url:null,artwork:"https://via.placeholder.com/300x300/1DB954/ffffff?text=Demo",explicit:!1,popularity:95,source:"demo",confidence:.9,audio_features:{tempo:171,energy:.73,danceability:.51,valence:.33}},{id:"demo_good_4_u",title:"Good 4 U",artist:"Olivia Rodrigo",album:"SOUR",genre:"Pop Rock",bpm:166,duration:178,preview_url:null,artwork:"https://via.placeholder.com/300x300/FF6B6B/ffffff?text=Demo",explicit:!1,popularity:89,source:"demo",confidence:.85,audio_features:{tempo:166,energy:.66,danceability:.56,valence:.43}},{id:"demo_levitating",title:"Levitating",artist:"Dua Lipa",album:"Future Nostalgia",genre:"Dance Pop",bpm:103,duration:203,preview_url:null,artwork:"https://via.placeholder.com/300x300/9B59B6/ffffff?text=Demo",explicit:!1,popularity:88,source:"demo",confidence:.92,audio_features:{tempo:103,energy:.82,danceability:.88,valence:.85}},{id:"demo_watermelon_sugar",title:"Watermelon Sugar",artist:"Harry Styles",album:"Fine Line",genre:"Pop Rock",bpm:95,duration:174,preview_url:null,artwork:"https://via.placeholder.com/300x300/E74C3C/ffffff?text=Demo",explicit:!1,popularity:92,source:"demo",confidence:.88,audio_features:{tempo:95,energy:.54,danceability:.73,valence:.56}}].filter(e=>e.title.toLowerCase().includes(t)||e.artist.toLowerCase().includes(t)||e.album.toLowerCase().includes(t)||e.genre.toLowerCase().includes(t));return{songs:r,total:r.length,hasMore:!1,isDemoMode:!0}}getMockSongById(e){return this.getMockSearchResults("").songs.find(t=>t.id===e)||null}estimateBPM(e,t){const r={pop:{min:100,max:130},rock:{min:110,max:140},"hip-hop":{min:70,max:140},dance:{min:120,max:135},electronic:{min:120,max:150},country:{min:120,max:140},"r&b":{min:70,max:100},jazz:{min:120,max:200},classical:{min:60,max:200},reggae:{min:60,max:90},blues:{min:60,max:120},funk:{min:100,max:125}},i=r[e?e.toLowerCase():"pop"]||r.pop,n=t?Math.min(t/180,1.2):1,o=Math.round((i.min+i.max)/2*n);return Math.max(i.min,Math.min(i.max,o))}formatForPractice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(0,i.A)((0,i.A)({},e),{},{name:e.title||e.name,originalBPM:e.bpm,targetBPM:t||e.bpm,bpm:t||e.bpm,timeSignature:e.timeSignature||{value:"4/4",label:"4/4 (Common time)",beatsPerMeasure:4,noteValue:4},practiceReady:!0,tempoAdjustment:t?((t-e.bpm)/e.bpm*100).toFixed(1):0})}async getRecommendations(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return this.getMockSearchResults("").songs.filter(r=>{const i=Math.abs(r.bpm-e)<=20,n=!t||r.genre.toLowerCase().includes(t.toLowerCase());return i&&n}).slice(0,r)}};var ee=r(579);const te=e=>{let{open:t,onClose:r}=e;const[i,o]=(0,n.useState)(""),[a,s]=(0,n.useState)([]),[u,f]=(0,n.useState)(!1),[j,k]=(0,n.useState)(null),[P,M]=(0,n.useState)(null),[L,B]=(0,n.useState)(null),I=(0,n.useRef)(null),{addSong:W,songs:U}=(0,O.Ay)();(0,n.useEffect)(()=>(i.trim().length>2?(I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{(async()=>{if(i.trim()){f(!0),k(null);try{const e=await $.searchSongs(i,15);s(e.songs||[])}catch(e){k(e.message||"Failed to search songs"),s([])}finally{f(!1)}}})()},500)):s([]),()=>{I.current&&clearTimeout(I.current)}),[i]);const F=e=>{if(!e)return"Unknown";const t=Math.floor(e/60),r=e%60;return"".concat(t,":").concat(r.toString().padStart(2,"0"))},N=e=>e>=.8?"success":e>=.6?"warning":"error",te=e=>U.some(t=>{var r,i,n,o;return(null===(r=t.title)||void 0===r?void 0:r.toLowerCase())===(null===(i=e.title)||void 0===i?void 0:i.toLowerCase())&&(null===(n=t.artist)||void 0===n?void 0:n.toLowerCase())===(null===(o=e.artist)||void 0===o?void 0:o.toLowerCase())});return(0,n.useEffect)(()=>{!t&&L&&(L.pause(),M(null),B(null))},[t,L]),(0,ee.jsxs)(w.A,{open:t,onClose:r,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{height:"80vh"}},children:[(0,ee.jsx)(S.A,{children:(0,ee.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,ee.jsx)(R.A,{color:"primary"}),"Search Songs & BPM"]})}),(0,ee.jsxs)(C.A,{dividers:!0,children:[(0,ee.jsx)(m.A,{fullWidth:!0,placeholder:"Search for songs, artists, or albums...",value:i,onChange:e=>o(e.target.value),InputProps:{startAdornment:(0,ee.jsx)(p.A,{position:"start",children:(0,ee.jsx)(R.A,{})})},sx:{mb:2}}),(0,ee.jsx)(x.A,{severity:"info",sx:{mb:2},children:(0,ee.jsx)(c.A,{variant:"body2",children:"Search for your favorite songs to get BPM suggestions for practice. BPM values are estimated based on genre and song characteristics, and can be adjusted after adding to your song list."})}),j&&(0,ee.jsx)(x.A,{severity:"error",sx:{mb:2},children:j}),!u&&a.length>0&&a.some(e=>"demo"===e.source)&&(0,ee.jsx)(x.A,{severity:"warning",sx:{mb:2},children:(0,ee.jsxs)(c.A,{variant:"body2",children:[(0,ee.jsx)("strong",{children:"Demo Mode Active:"})," External music APIs are restricted in development mode due to CORS policies. Showing sample search results with realistic BPM estimates for demonstration purposes."]})}),u&&(0,ee.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",py:3},children:(0,ee.jsx)(H.A,{})}),!u&&a.length>0&&(0,ee.jsx)(g.A,{sx:{maxHeight:"50vh",overflow:"auto"},children:a.map((e,t)=>{return(0,ee.jsxs)(A.Ay,{sx:{border:"1px solid",borderColor:P===e.id?"primary.main":"divider",borderRadius:2,mb:2,p:2,backgroundColor:P===e.id?"action.selected":"background.paper",boxShadow:P===e.id?"0 4px 12px rgba(25, 118, 210, 0.15)":"0 1px 3px rgba(0,0,0,0.1)",transition:"all 0.2s ease-in-out","&:hover":{backgroundColor:P===e.id?"action.selected":"action.hover",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",transform:"translateY(-1px)"}},children:[(0,ee.jsx)(Q.A,{children:(0,ee.jsxs)(l.A,{sx:{position:"relative",width:64,height:64,borderRadius:2,overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.15)","&:hover .play-overlay":{opacity:e.preview_url?1:0}},children:[(0,ee.jsx)(q.A,{src:e.artwork,variant:"rounded",sx:{width:"100%",height:"100%",borderRadius:2,fontSize:"1.5rem"},children:(0,ee.jsx)(V.A,{sx:{fontSize:"2rem",color:"text.secondary"}})}),(0,ee.jsx)(l.A,{className:"play-overlay",sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.6)",opacity:P===e.id?1:0,transition:"opacity 0.2s ease-in-out",cursor:"pointer"},onClick:()=>(e=>{if(!e.preview_url)return void("demo"===e.source?k("Demo mode: Audio previews are not available. BPM values are provided for practice."):k("Preview not available for this track. This is common due to licensing restrictions. The BPM data is still accurate for practice."));if(L&&(L.pause(),L.currentTime=0),P===e.id)return M(null),void B(null);if("demo"===e.source)return k("Demo mode: Audio previews are not available. BPM values are provided for practice."),M(e.id),void setTimeout(()=>{M(null)},2e3);const t=new Audio(e.preview_url);t.volume=.7,t.addEventListener("ended",()=>{M(null),B(null)}),t.addEventListener("error",()=>{k("Failed to load preview - this may be due to licensing restrictions"),M(null),B(null)}),t.play().then(()=>{M(e.id),B(t)}).catch(()=>{k("Failed to play preview - this may be due to licensing restrictions"),M(null),B(null)})})(e),children:(0,ee.jsx)(d.A,{title:"demo"===e.source?"Demo mode - Click for BPM info":"Play preview",children:(0,ee.jsx)(h.A,{sx:{backgroundColor:"rgba(255, 255, 255, 0.9)",color:"demo"===e.source?"warning.main":"primary.main",width:36,height:36,"&:hover":{backgroundColor:"white",transform:"scale(1.1)"},transition:"all 0.2s ease-in-out"},size:"small",children:P===e.id?"demo"===e.source?(0,ee.jsx)(Y.A,{fontSize:"small"}):(0,ee.jsx)(J.A,{fontSize:"small"}):"demo"===e.source?(0,ee.jsx)(Y.A,{fontSize:"small"}):(0,ee.jsx)(E.A,{fontSize:"small"})})})}),P===e.id&&(0,ee.jsx)(l.A,{sx:{position:"absolute",bottom:4,right:4,backgroundColor:"primary.main",borderRadius:"50%",width:12,height:12,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,ee.jsx)(l.A,{sx:{width:6,height:6,backgroundColor:"white",borderRadius:"50%",animation:"pulse 1.5s ease-in-out infinite","@keyframes pulse":{"0%":{transform:"scale(0.8)",opacity:1},"50%":{transform:"scale(1.2)",opacity:.7},"100%":{transform:"scale(0.8)",opacity:1}}}})})]})}),(0,ee.jsx)(b.A,{sx:{ml:2},primary:(0,ee.jsx)(c.A,{variant:"subtitle1",sx:{fontWeight:600,mb:.5},children:e.title}),secondary:(0,ee.jsxs)(l.A,{children:[(0,ee.jsxs)(c.A,{variant:"body2",color:"text.secondary",sx:{mb:.5},children:["by ",e.artist]}),e.album&&(0,ee.jsxs)(c.A,{variant:"caption",color:"text.secondary",sx:{mb:1,display:"block"},children:["from ",e.album]}),(0,ee.jsxs)(l.A,{sx:{display:"flex",gap:.5,mt:1,flexWrap:"wrap"},children:[(0,ee.jsx)(v.A,{icon:(0,ee.jsx)(K.A,{}),label:"".concat(e.bpm," BPM"),size:"small",color:"primary",variant:"outlined"}),e.duration&&(0,ee.jsx)(v.A,{icon:(0,ee.jsx)(X.A,{}),label:F(e.duration),size:"small",variant:"outlined"}),e.genre&&(0,ee.jsx)(v.A,{label:e.genre,size:"small",variant:"outlined"}),"demo"===e.source&&(0,ee.jsx)(v.A,{label:"Demo Mode",size:"small",color:"warning",variant:"outlined"}),e.estimated_bpm&&(0,ee.jsx)(d.A,{title:(r=e.confidence,r>=.8?"High confidence":r>=.6?"Medium confidence":"Low confidence"),children:(0,ee.jsx)(v.A,{icon:(0,ee.jsx)(Y.A,{}),label:"Estimated",size:"small",color:N(e.confidence),variant:"outlined"})}),P===e.id&&(0,ee.jsx)(v.A,{icon:(0,ee.jsx)(E.A,{}),label:"Playing Preview",size:"small",color:"primary",variant:"filled"}),e.preview_url&&P!==e.id&&(0,ee.jsx)(v.A,{icon:(0,ee.jsx)(E.A,{}),label:"demo"===e.source?"Demo Info":"Preview Available",size:"small",variant:"outlined",color:"demo"===e.source?"warning":"secondary"})]})]}),secondaryTypographyProps:{component:"div"}}),(0,ee.jsx)(y.A,{children:te(e)?(0,ee.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1,px:2,py:1,backgroundColor:"success.light",borderRadius:2,border:"1px solid",borderColor:"success.main"},children:[(0,ee.jsx)(Z.A,{color:"success",fontSize:"small"}),(0,ee.jsx)(c.A,{variant:"body2",color:"success.dark",fontWeight:"medium",sx:{fontSize:"0.75rem"},children:"ADDED"})]}):(0,ee.jsx)(d.A,{title:"Add to Song List",children:(0,ee.jsx)(h.A,{edge:"end",color:"primary",onClick:()=>(e=>{if(te(e))return void k("This song is already in your song list!");const t=$.formatForPractice(e);W(t),k(null)})(e),sx:{backgroundColor:"primary.light",color:"primary.main","&:hover":{backgroundColor:"primary.main",color:"white",transform:"scale(1.05)"},transition:"all 0.2s ease-in-out"},children:(0,ee.jsx)(D.A,{})})})})]},"".concat(e.id,"-").concat(t));var r})}),u&&(0,ee.jsx)(g.A,{children:[...Array(5)].map((e,t)=>(0,ee.jsxs)(A.Ay,{sx:{mb:1},children:[(0,ee.jsx)(Q.A,{children:(0,ee.jsx)(G.A,{variant:"rectangular",width:56,height:56})}),(0,ee.jsx)(b.A,{primary:(0,ee.jsx)(G.A,{variant:"text",width:"60%"}),secondary:(0,ee.jsxs)(l.A,{children:[(0,ee.jsx)(G.A,{variant:"text",width:"40%"}),(0,ee.jsxs)(l.A,{sx:{display:"flex",gap:1,mt:1},children:[(0,ee.jsx)(G.A,{variant:"rectangular",width:80,height:24}),(0,ee.jsx)(G.A,{variant:"rectangular",width:60,height:24}),(0,ee.jsx)(G.A,{variant:"rectangular",width:50,height:24})]})]}),secondaryTypographyProps:{component:"div"}})]},t))}),!u&&i.trim().length>2&&0===a.length&&!j&&(0,ee.jsxs)(l.A,{sx:{textAlign:"center",py:4},children:[(0,ee.jsx)(_.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,ee.jsx)(c.A,{variant:"h6",color:"text.secondary",children:"No songs found"}),(0,ee.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Try searching with different keywords"})]}),!u&&i.trim().length<=2&&(0,ee.jsxs)(l.A,{sx:{textAlign:"center",py:4},children:[(0,ee.jsx)(R.A,{sx:{fontSize:48,color:"text.secondary",mb:2}}),(0,ee.jsx)(c.A,{variant:"h6",color:"text.secondary",children:"Search for Songs"}),(0,ee.jsx)(c.A,{variant:"body2",color:"text.secondary",children:"Enter at least 3 characters to start searching"})]})]}),(0,ee.jsx)(z.A,{children:(0,ee.jsx)(T.A,{onClick:r,children:"Close"})})]})},re=e=>{var t;let{onPlaySong:r}=e;const H=(0,N.A)(),Q=(0,o.A)(H.breakpoints.down("sm")),{songs:q,currentSong:G,addSong:V,updateSong:Y,deleteSong:J,loadSong:K,bpm:X,timeSignature:Z}=(0,O.Ay)(),[$,re]=(0,n.useState)(!1),[ie,ne]=(0,n.useState)(null),[oe,ae]=(0,n.useState)(""),[se,le]=(0,n.useState)(!1),[ce,de]=(0,n.useState)({name:"",bpm:120,timeSignature:O.Qi[0],duration:"",notes:""}),[ue,me]=(0,n.useState)({}),pe=q.filter(e=>(e.name||e.title||"").toLowerCase().includes(oe.toLowerCase())||(e.artist||"").toLowerCase().includes(oe.toLowerCase())||(e.notes||"").toLowerCase().includes(oe.toLowerCase())||(e.genre||"").toLowerCase().includes(oe.toLowerCase())),he=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e?(ne(e),de({name:e.name||e.title||"",bpm:e.bpm,timeSignature:e.timeSignature||O.Qi[0],duration:e.duration||"",notes:e.notes||""})):(ne(null),de({name:"",bpm:X,timeSignature:Z,duration:"",notes:""})),me({}),re(!0)},xe=()=>{re(!1),ne(null),de({name:"",bpm:120,timeSignature:O.Qi[0],duration:"",notes:""}),me({})},ge=e=>{if(!e)return null;const t=Math.floor(e/60),r=e%60;return"".concat(t,":").concat(r.toString().padStart(2,"0"))};return(0,ee.jsx)(a.A,{elevation:6,children:(0,ee.jsxs)(s.A,{children:[(0,ee.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2},children:[(0,ee.jsxs)(c.A,{variant:"h5",component:"h2",fontWeight:"bold",children:[(0,ee.jsx)(_.A,{sx:{mr:1,verticalAlign:"middle"}}),"Songs"]}),(0,ee.jsxs)(l.A,{sx:{display:"flex",gap:1},children:[(0,ee.jsx)(d.A,{title:"Search Online Songs",children:(0,ee.jsx)(u.A,{size:"medium",color:"secondary",onClick:()=>le(!0),sx:{boxShadow:"0 4px 12px ".concat(H.palette.secondary.main,"33")},children:(0,ee.jsx)(B.A,{})})}),(0,ee.jsx)(d.A,{title:"Add New Song",children:(0,ee.jsx)(u.A,{size:"medium",color:"primary",onClick:()=>he(),sx:{boxShadow:"0 4px 12px ".concat(H.palette.primary.main,"33")},children:(0,ee.jsx)(D.A,{})})})]})]}),q.length>0&&(0,ee.jsx)(m.A,{fullWidth:!0,size:"small",placeholder:"Search songs...",value:oe,onChange:e=>ae(e.target.value),sx:{mb:2},InputProps:{startAdornment:(0,ee.jsx)(p.A,{position:"start",children:(0,ee.jsx)(R.A,{})}),endAdornment:oe&&(0,ee.jsx)(p.A,{position:"end",children:(0,ee.jsx)(h.A,{size:"small",onClick:()=>ae(""),children:(0,ee.jsx)(I.A,{})})})}}),0===pe.length?(0,ee.jsx)(x.A,{severity:"info",sx:{textAlign:"center","& .MuiAlert-message":{width:"100%"}},children:0===q.length?"No songs saved yet. Create your first song!":"No songs match your search."}):(0,ee.jsx)(g.A,{disablePadding:!0,children:pe.map((e,t)=>(0,ee.jsxs)(n.Fragment,{children:[(0,ee.jsxs)(A.Ay,{sx:{bgcolor:(null===G||void 0===G?void 0:G.id)===e.id?H.palette.action.selected:"transparent",borderRadius:1,mb:1,border:(null===G||void 0===G?void 0:G.id)===e.id?"2px solid ".concat(H.palette.primary.main):"none"},children:[(0,ee.jsx)(b.A,{primary:(0,ee.jsxs)(l.A,{sx:{display:"flex",alignItems:"center",gap:1,flexWrap:"wrap"},children:[(0,ee.jsx)(c.A,{variant:"subtitle1",fontWeight:"medium",children:e.title||e.name}),e.artist&&(0,ee.jsxs)(c.A,{variant:"body2",color:"text.secondary",children:["by ",e.artist]}),(0,ee.jsxs)(f.A,{direction:"row",spacing:.5,children:[(0,ee.jsx)(v.A,{label:"".concat(e.bpm," BPM"),size:"small",color:"primary",variant:"outlined"}),(0,ee.jsx)(v.A,{label:e.timeSignature.value,size:"small",variant:"outlined"}),e.duration&&(0,ee.jsx)(v.A,{label:ge(e.duration),size:"small",color:"secondary",variant:"outlined",icon:(0,ee.jsx)(W.A,{})})]})]}),secondary:e.notes&&(0,ee.jsx)(c.A,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:e.notes}),primaryTypographyProps:{component:"div"}}),(0,ee.jsx)(y.A,{children:(0,ee.jsxs)(f.A,{direction:"row",spacing:.5,children:[(0,ee.jsx)(d.A,{title:"Load Song",children:(0,ee.jsx)(h.A,{size:"small",color:"primary",onClick:()=>(e=>{K(e),r&&r()})(e),children:(0,ee.jsx)(E.A,{})})}),(0,ee.jsx)(d.A,{title:"Edit Song",children:(0,ee.jsx)(h.A,{size:"small",onClick:()=>he(e),children:(0,ee.jsx)(U.A,{})})}),(0,ee.jsx)(d.A,{title:"Delete Song",children:(0,ee.jsx)(h.A,{size:"small",color:"error",onClick:()=>{return t=e.id,void(window.confirm("Are you sure you want to delete this song?")&&J(t));var t},children:(0,ee.jsx)(F.A,{})})})]})})]}),t<pe.length-1&&(0,ee.jsx)(j.A,{})]},e.id))}),(0,ee.jsxs)(w.A,{open:$,onClose:xe,maxWidth:"sm",fullWidth:!0,fullScreen:Q,children:[(0,ee.jsx)(S.A,{children:ie?"Edit Song":"Add New Song"}),(0,ee.jsx)(C.A,{children:(0,ee.jsxs)(f.A,{spacing:2,sx:{mt:1},children:[(0,ee.jsx)(m.A,{label:"Song Name",value:ce.name,onChange:e=>de((0,i.A)((0,i.A)({},ce),{},{name:e.target.value})),error:!!ue.name,helperText:ue.name,fullWidth:!0,required:!0}),(0,ee.jsx)(m.A,{label:"BPM",type:"number",value:ce.bpm,onChange:e=>de((0,i.A)((0,i.A)({},ce),{},{bpm:parseInt(e.target.value)||0})),error:!!ue.bpm,helperText:ue.bpm||"Between 30 and 300",fullWidth:!0,required:!0,inputProps:{min:30,max:300}}),(0,ee.jsxs)(k.A,{fullWidth:!0,children:[(0,ee.jsx)(P.A,{children:"Time Signature"}),(0,ee.jsx)(M.A,{value:(null===(t=ce.timeSignature)||void 0===t?void 0:t.value)||ce.timeSignature||O.Qi[0].value,label:"Time Signature",onChange:e=>{const t=O.Qi.find(t=>t.value===e.target.value);de((0,i.A)((0,i.A)({},ce),{},{timeSignature:t}))},children:O.Qi.map(e=>(0,ee.jsx)(L.A,{value:e.value,children:e.value},e.value))})]}),(0,ee.jsx)(m.A,{label:"Duration (seconds)",type:"number",value:ce.duration,onChange:e=>de((0,i.A)((0,i.A)({},ce),{},{duration:e.target.value})),error:!!ue.duration,helperText:ue.duration||"Optional practice duration (10-3600 seconds)",fullWidth:!0,inputProps:{min:10,max:3600}}),(0,ee.jsx)(m.A,{label:"Notes",value:ce.notes,onChange:e=>de((0,i.A)((0,i.A)({},ce),{},{notes:e.target.value})),fullWidth:!0,multiline:!0,rows:3,placeholder:"Optional notes about this song..."})]})}),(0,ee.jsxs)(z.A,{sx:{p:2},children:[(0,ee.jsx)(T.A,{onClick:xe,children:"Cancel"}),(0,ee.jsx)(T.A,{onClick:()=>{if(!(()=>{const e={};return ce.name&&ce.name.trim()||(e.name="Song name is required"),(ce.bpm<30||ce.bpm>300)&&(e.bpm="BPM must be between 30 and 300"),ce.duration&&(ce.duration<10||ce.duration>3600)&&(e.duration="Duration must be between 10 and 3600 seconds"),me(e),0===Object.keys(e).length})())return;const e={name:(ce.name||"").trim(),bpm:parseInt(ce.bpm),timeSignature:ce.timeSignature,duration:ce.duration?parseInt(ce.duration):null,notes:(ce.notes||"").trim()||null,createdAt:(null===ie||void 0===ie?void 0:ie.createdAt)||(new Date).toISOString(),updatedAt:(new Date).toISOString()};ie?Y(ie.id,e):V(e),xe()},variant:"contained",disabled:!ce.name||!ce.name.trim(),children:ie?"Update":"Save"})]})]}),(0,ee.jsx)(te,{open:se,onClose:()=>le(!1)})]})})}}}]);
//# sourceMappingURL=138.dc9a5562.chunk.js.map