"use strict";(self.webpackChunkpro_metronome=self.webpackChunkpro_metronome||[]).push([[788],{788:(e,t,s)=>{s.r(t),s.d(t,{default:()=>V});var a=s(5043),r=s(344),i=s(2110),n=s(6494),o=s(6446),l=s(5865),c=s(4194),d=s(1906),m=s(4669),x=s(4056),h=s(8903),u=s(5721),p=s(4628),j=s(8734),g=s(3845),y=s(8266),A=s(7392),b=s(9336),v=s(2153),f=s(8124),k=s(4593),S=s(7795),M=s(1781),w=s(4496),B=s(1387),D=s(6240),P=s(909),C=s(9379),z=s(3193),T=s(9190),W=s(598),H=s(2143),L=s(8911),R=s(108),N=s(5748),K=s(7734),F=s(2185),I=s(760),G=s(5899),O=s(2310),E=s(2291),Y=s(6028),_=s(6992),J=s(6102),Q=s(7869),q=s(579);const U=()=>{const e=(0,D.A)(),{sessions:t}=(0,P.Ay)(),[s,r]=a.useState("practice-time"),[c,d]=a.useState("all"),m=(0,a.useMemo)(()=>{if("all"===c)return t;const e=new Date,s=new Date;switch(c){case"week":s.setDate(e.getDate()-7);break;case"month":s.setMonth(e.getMonth()-1);break;case"3months":s.setMonth(e.getMonth()-3);break;default:return t}return t.filter(e=>new Date(e.date)>=s)},[t,c]),x=(0,a.useMemo)(()=>{if(0===m.length)return[];switch(s){case"practice-time":return m.map((e,t)=>({session:t+1,date:new Date(e.date).toLocaleDateString(),practiceTime:Math.round(e.duration/6e4),averageBpm:e.averageBpm}));case"bpm-progress":return m.map((e,t)=>({session:t+1,date:new Date(e.date).toLocaleDateString(),averageBpm:e.averageBpm,minBpm:e.bpmRange.min,maxBpm:e.bpmRange.max}));case"daily-summary":const e={};return m.forEach(t=>{const s=new Date(t.date).toLocaleDateString();e[s]||(e[s]={date:s,totalTime:0,sessionCount:0,avgBpm:0,bpmSum:0}),e[s].totalTime+=t.duration,e[s].sessionCount+=1,e[s].bpmSum+=t.averageBpm}),Object.values(e).map(e=>(0,C.A)((0,C.A)({},e),{},{totalTime:Math.round(e.totalTime/6e4),avgBpm:Math.round(e.bpmSum/e.sessionCount)}));case"bpm-distribution":const t={"60-80":0,"81-100":0,"101-120":0,"121-140":0,"141-160":0,"161-180":0,"181+":0};return m.forEach(e=>{const s=e.averageBpm;s<=80?t["60-80"]++:s<=100?t["81-100"]++:s<=120?t["101-120"]++:s<=140?t["121-140"]++:s<=160?t["141-160"]++:s<=180?t["161-180"]++:t["181+"]++}),Object.entries(t).map(e=>{let[t,s]=e;return{range:t,count:s,percentage:Math.round(s/m.length*100)}});default:return[]}},[m,s]),u=[e.palette.primary.main,e.palette.secondary.main,e.palette.error.main,e.palette.warning.main,e.palette.info.main,e.palette.success.main,e.palette.primary.light],p=e=>{let{active:t,payload:s,label:a}=e;return t&&s&&s.length?(0,q.jsxs)(i.A,{elevation:3,sx:{p:1},children:[(0,q.jsx)(l.A,{variant:"body2",sx:{fontWeight:600},children:a}),s.map((e,t)=>(0,q.jsxs)(l.A,{variant:"body2",sx:{color:e.color},children:[e.name,": ",e.value,e.name.includes("Time")&&" min",e.name.includes("Bpm")&&" BPM"]},t))]}):null};return 0===t.length?(0,q.jsxs)(o.A,{sx:{textAlign:"center",py:4},children:[(0,q.jsx)(l.A,{variant:"h6",color:"text.secondary",sx:{mb:2},children:"No Progress Data Yet"}),(0,q.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Start practicing to see your progress charts and analytics."})]}):(0,q.jsxs)(o.A,{sx:{width:"100%"},children:[(0,q.jsxs)(h.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,q.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,q.jsxs)(z.A,{fullWidth:!0,size:"small",children:[(0,q.jsx)(T.A,{children:"Chart Type"}),(0,q.jsxs)(W.A,{value:s,onChange:e=>r(e.target.value),label:"Chart Type",children:[(0,q.jsx)(H.A,{value:"practice-time",children:"Practice Time Progress"}),(0,q.jsx)(H.A,{value:"bpm-progress",children:"BPM Progress"}),(0,q.jsx)(H.A,{value:"daily-summary",children:"Daily Summary"}),(0,q.jsx)(H.A,{value:"bpm-distribution",children:"BPM Distribution"})]})]})}),(0,q.jsx)(h.Ay,{item:!0,xs:12,sm:6,children:(0,q.jsxs)(z.A,{fullWidth:!0,size:"small",children:[(0,q.jsx)(T.A,{children:"Time Range"}),(0,q.jsxs)(W.A,{value:c,onChange:e=>d(e.target.value),label:"Time Range",children:[(0,q.jsx)(H.A,{value:"all",children:"All Time"}),(0,q.jsx)(H.A,{value:"week",children:"Last Week"}),(0,q.jsx)(H.A,{value:"month",children:"Last Month"}),(0,q.jsx)(H.A,{value:"3months",children:"Last 3 Months"})]})]})})]}),(0,q.jsxs)(L.A,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap"},children:["practice-time"===s&&(0,q.jsx)(g.A,{label:"Shows practice time per session",size:"small",color:"primary",variant:"outlined"}),"bpm-progress"===s&&(0,q.jsx)(g.A,{label:"Shows BPM progression over time",size:"small",color:"primary",variant:"outlined"}),"daily-summary"===s&&(0,q.jsx)(g.A,{label:"Shows total practice time per day",size:"small",color:"primary",variant:"outlined"}),"bpm-distribution"===s&&(0,q.jsx)(g.A,{label:"Shows BPM range distribution",size:"small",color:"primary",variant:"outlined"})]}),(0,q.jsx)(i.A,{elevation:2,children:(0,q.jsxs)(n.A,{children:[(0,q.jsxs)(l.A,{variant:"h6",sx:{mb:2,textAlign:"center"},children:["practice-time"===s&&"Practice Time Progress","bpm-progress"===s&&"BPM Progress Over Time","daily-summary"===s&&"Daily Practice Summary","bpm-distribution"===s&&"BPM Range Distribution"]}),(()=>{if(0===x.length)return(0,q.jsx)(o.A,{sx:{height:300,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,q.jsx)(l.A,{variant:"body1",color:"text.secondary",children:"No data available for the selected time range"})});switch(s){case"practice-time":return(0,q.jsx)(R.u,{width:"100%",height:300,children:(0,q.jsxs)(N.b,{data:x,children:[(0,q.jsx)(K.d,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,q.jsx)(F.W,{dataKey:"session",stroke:e.palette.text.secondary,tick:{fontSize:12}}),(0,q.jsx)(I.h,{stroke:e.palette.text.secondary,tick:{fontSize:12}}),(0,q.jsx)(G.m,{content:(0,q.jsx)(p,{})}),(0,q.jsx)(O.N,{type:"monotone",dataKey:"practiceTime",stroke:e.palette.primary.main,strokeWidth:3,dot:{fill:e.palette.primary.main,strokeWidth:2,r:4},name:"Practice Time"})]})});case"bpm-progress":return(0,q.jsx)(R.u,{width:"100%",height:300,children:(0,q.jsxs)(N.b,{data:x,children:[(0,q.jsx)(K.d,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,q.jsx)(F.W,{dataKey:"session",stroke:e.palette.text.secondary,tick:{fontSize:12}}),(0,q.jsx)(I.h,{stroke:e.palette.text.secondary,tick:{fontSize:12}}),(0,q.jsx)(G.m,{content:(0,q.jsx)(p,{})}),(0,q.jsx)(O.N,{type:"monotone",dataKey:"averageBpm",stroke:e.palette.primary.main,strokeWidth:3,dot:{fill:e.palette.primary.main,strokeWidth:2,r:4},name:"Average BPM"}),(0,q.jsx)(O.N,{type:"monotone",dataKey:"maxBpm",stroke:e.palette.secondary.main,strokeWidth:2,strokeDasharray:"5 5",dot:{fill:e.palette.secondary.main,strokeWidth:2,r:3},name:"Max BPM"})]})});case"daily-summary":return(0,q.jsx)(R.u,{width:"100%",height:300,children:(0,q.jsxs)(E.E,{data:x,children:[(0,q.jsx)(K.d,{strokeDasharray:"3 3",stroke:e.palette.divider}),(0,q.jsx)(F.W,{dataKey:"date",stroke:e.palette.text.secondary,tick:{fontSize:12},angle:-45,textAnchor:"end",height:60}),(0,q.jsx)(I.h,{stroke:e.palette.text.secondary,tick:{fontSize:12}}),(0,q.jsx)(G.m,{content:(0,q.jsx)(p,{})}),(0,q.jsx)(Y.y,{dataKey:"totalTime",fill:e.palette.primary.main,name:"Total Time",radius:[4,4,0,0]})]})});case"bpm-distribution":return(0,q.jsx)(R.u,{width:"100%",height:300,children:(0,q.jsxs)(_.r,{children:[(0,q.jsx)(J.F,{data:x.filter(e=>e.count>0),cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{range:t,percentage:s}=e;return"".concat(t," (").concat(s,"%)")},outerRadius:80,fill:"#8884d8",dataKey:"count",children:x.map((e,t)=>(0,q.jsx)(Q.f,{fill:u[t%u.length]},"cell-".concat(t)))}),(0,q.jsx)(G.m,{content:(0,q.jsx)(p,{})})]})});default:return null}})()]})}),m.length>0&&(0,q.jsx)(i.A,{elevation:1,sx:{mt:2},children:(0,q.jsxs)(n.A,{children:[(0,q.jsx)(l.A,{variant:"h6",sx:{mb:2},children:"Quick Insights"}),(0,q.jsxs)(h.Ay,{container:!0,spacing:2,children:[(0,q.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,q.jsxs)(o.A,{sx:{textAlign:"center"},children:[(0,q.jsx)(l.A,{variant:"h4",color:"primary.main",children:m.length}),(0,q.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Sessions"})]})}),(0,q.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,q.jsxs)(o.A,{sx:{textAlign:"center"},children:[(0,q.jsxs)(l.A,{variant:"h4",color:"primary.main",children:[Math.round(m.reduce((e,t)=>e+t.duration,0)/6e4),"m"]}),(0,q.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Total Time"})]})}),(0,q.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,q.jsxs)(o.A,{sx:{textAlign:"center"},children:[(0,q.jsx)(l.A,{variant:"h4",color:"primary.main",children:Math.round(m.reduce((e,t)=>e+t.averageBpm,0)/m.length)}),(0,q.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Avg BPM"})]})}),(0,q.jsx)(h.Ay,{item:!0,xs:12,sm:6,md:3,children:(0,q.jsxs)(o.A,{sx:{textAlign:"center"},children:[(0,q.jsxs)(l.A,{variant:"h4",color:"primary.main",children:[Math.round(m.reduce((e,t)=>e+t.duration,0)/(6e4*m.length)),"m"]}),(0,q.jsx)(l.A,{variant:"body2",color:"text.secondary",children:"Avg Session"})]})})]})]})})]})},V=a.memo(()=>{const e=(0,D.A)(),t=(0,r.A)(e.breakpoints.down("sm")),[s,C]=(0,a.useState)(0),{sessions:z,clearHistory:T,deleteSession:W,getHistoryStats:H,generateSampleData:L,debugStorageData:R,clearStorageData:N}=(0,P.Ay)();console.log("History component - sessions:",z),console.log("History component - sessions length:",null===z||void 0===z?void 0:z.length),console.log("History component - sessions data:",JSON.stringify(z,null,2));const K=(0,a.useMemo)(()=>H(),[z,H]),F=(0,a.useCallback)(e=>{const t=new Date(e);return t.toLocaleDateString()+" "+t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},[]),I=(0,a.useCallback)(e=>{const t=Math.floor(e/6e4),s=Math.floor(e%6e4/1e3);return"".concat(t,"m ").concat(s,"s")},[]),G=(0,a.useCallback)(t=>{let{icon:s,title:a,value:r,subtitle:c}=t;return(0,q.jsx)(i.A,{elevation:2,sx:{height:"100%",background:"linear-gradient(135deg, ".concat(e.palette.background.paper," 0%, ").concat(e.palette.background.default," 100%)"),border:"1px solid ".concat(e.palette.divider)},children:(0,q.jsxs)(n.A,{sx:{textAlign:"center",py:3},children:[(0,q.jsx)(o.A,{sx:{color:e.palette.primary.main,mb:1},children:s}),(0,q.jsx)(l.A,{variant:"h4",sx:{fontWeight:700,color:e.palette.primary.main,mb:1},children:r}),(0,q.jsx)(l.A,{variant:"body1",sx:{fontWeight:600,color:e.palette.text.primary,mb:.5},children:a}),c&&(0,q.jsx)(l.A,{variant:"caption",sx:{color:e.palette.text.secondary},children:c})]})})},[e]),O=(0,a.useMemo)(()=>z.slice().reverse(),[z]);return 0===z.length?(0,q.jsx)(o.A,{sx:{width:"100%",maxWidth:600,mx:"auto",p:2},children:(0,q.jsxs)(c.A,{severity:"info",sx:{mb:3,"& .MuiAlert-message":{width:"100%",textAlign:"center"}},children:[(0,q.jsx)(l.A,{variant:"h6",sx:{mb:1},children:"No Practice History Yet"}),(0,q.jsx)(l.A,{variant:"body2",sx:{mb:2},children:"Start practicing with the metronome to track your sessions and see detailed statistics about your practice time and BPM usage."}),(0,q.jsx)(l.A,{variant:"body2",sx:{mb:2,fontWeight:"bold"},children:"\ud83d\udca1 How to create practice sessions:"}),(0,q.jsxs)(l.A,{variant:"body2",sx:{mb:1,textAlign:"left"},children:['1. Go to the "Metronome" tab',(0,q.jsx)("br",{}),"2. Click the play button to start the metronome",(0,q.jsx)("br",{}),"3. Let it run for at least 5 seconds",(0,q.jsx)("br",{}),"4. Click stop to end the session",(0,q.jsx)("br",{}),"5. Return here to see your practice data!"]}),(0,q.jsx)(d.A,{variant:"outlined",onClick:L,sx:{mt:2,mr:2},size:"small",children:"Generate Sample Data (For Demo)"}),(0,q.jsx)(d.A,{variant:"outlined",onClick:R,sx:{mt:2,mr:1},size:"small",color:"secondary",children:"Debug Storage"}),(0,q.jsx)(d.A,{variant:"outlined",onClick:N,sx:{mt:2},size:"small",color:"error",children:"Clear Storage"})]})}):(0,q.jsxs)(o.A,{sx:{width:"100%",maxWidth:800,mx:"auto",p:2},children:[(0,q.jsx)(i.A,{elevation:2,sx:{mb:3},children:(0,q.jsxs)(m.A,{value:s,onChange:(e,t)=>C(t),variant:t?"scrollable":"standard",centered:!t,scrollButtons:!!t&&"auto",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root":{minHeight:56,fontSize:{xs:"0.875rem",sm:"0.95rem"},fontWeight:600,textTransform:"none",minWidth:{xs:"auto",sm:160},px:{xs:1,sm:2}},"& .MuiTabs-scrollButtons":{"&.Mui-disabled":{opacity:.3}}},children:[(0,q.jsx)(x.A,{icon:(0,q.jsx)(v.A,{}),label:"Progress Charts",iconPosition:"start"}),(0,q.jsx)(x.A,{icon:(0,q.jsx)(f.A,{}),label:"Session History",iconPosition:"start"})]})}),0===s&&(0,q.jsx)(U,{}),1===s&&(0,q.jsx)(q.Fragment,{children:0===z.length?(0,q.jsxs)(c.A,{severity:"info",sx:{mb:3,"& .MuiAlert-message":{width:"100%",textAlign:"center"}},children:[(0,q.jsx)(l.A,{variant:"h6",sx:{mb:1},children:"No Practice History Yet"}),(0,q.jsx)(l.A,{variant:"body2",sx:{mb:2},children:"Start practicing with the metronome to track your sessions and see detailed statistics about your practice time and BPM usage."}),(0,q.jsx)(l.A,{variant:"body2",sx:{mb:2,fontWeight:"bold"},children:"\ud83d\udca1 How to create practice sessions:"}),(0,q.jsxs)(l.A,{variant:"body2",sx:{mb:1,textAlign:"left"},children:['1. Go to the "Metronome" tab',(0,q.jsx)("br",{}),"2. Click the play button to start the metronome",(0,q.jsx)("br",{}),"3. Let it run for at least 5 seconds",(0,q.jsx)("br",{}),"4. Click stop to end the session",(0,q.jsx)("br",{}),"5. Return here to see your practice data!"]}),(0,q.jsx)(d.A,{variant:"outlined",onClick:L,sx:{mt:2,mr:2},size:"small",children:"Generate Sample Data (For Demo)"}),(0,q.jsx)(d.A,{variant:"outlined",onClick:R,sx:{mt:2,mr:1},size:"small",color:"secondary",children:"Debug Storage"}),(0,q.jsx)(d.A,{variant:"outlined",onClick:N,sx:{mt:2},size:"small",color:"error",children:"Clear Storage"})]}):(0,q.jsxs)(q.Fragment,{children:[(0,q.jsxs)(h.Ay,{container:!0,spacing:2,sx:{mb:3},children:[(0,q.jsx)(h.Ay,{item:!0,xs:12,sm:4,children:(0,q.jsx)(G,{icon:(0,q.jsx)(k.A,{sx:{fontSize:32}}),title:"Total Sessions",value:K.totalSessions})}),(0,q.jsx)(h.Ay,{item:!0,xs:12,sm:4,children:(0,q.jsx)(G,{icon:(0,q.jsx)(S.A,{sx:{fontSize:32}}),title:"Total Practice",value:K.totalPracticeTimeFormatted})}),(0,q.jsx)(h.Ay,{item:!0,xs:12,sm:4,children:(0,q.jsx)(G,{icon:(0,q.jsx)(M.A,{sx:{fontSize:32}}),title:"Average BPM",value:K.averageBpm})})]}),(0,q.jsx)(i.A,{elevation:2,children:(0,q.jsxs)(n.A,{children:[(0,q.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,q.jsx)(l.A,{variant:"h6",sx:{fontWeight:600},children:"Practice Sessions"}),(0,q.jsx)(d.A,{startIcon:(0,q.jsx)(w.A,{}),onClick:T,size:"small",color:"error",variant:"outlined",children:"Clear All"})]}),(0,q.jsx)(u.A,{children:O.map((e,s)=>(0,q.jsxs)(a.Fragment,{children:[(0,q.jsxs)(p.Ay,{sx:{px:0,py:2,flexDirection:t?"column":"row",alignItems:t?"flex-start":"center"},children:[(0,q.jsx)(j.A,{primary:(0,q.jsxs)(o.A,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,q.jsx)(l.A,{variant:"body1",sx:{fontWeight:600},children:F(e.date)}),(0,q.jsxs)(o.A,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[(0,q.jsx)(g.A,{label:"".concat(I(e.duration)),size:"small",color:"primary",variant:"outlined"}),(0,q.jsx)(g.A,{label:"Avg: ".concat(e.averageBpm," BPM"),size:"small",color:"secondary",variant:"outlined"}),(0,q.jsx)(g.A,{label:"".concat(e.bpmRange.min,"-").concat(e.bpmRange.max," BPM"),size:"small",variant:"outlined"}),(0,q.jsx)(g.A,{label:e.timeSignature,size:"small",variant:"outlined"}),"None"!==e.subdivision&&(0,q.jsx)(g.A,{label:e.subdivision,size:"small",variant:"outlined"})]})]}),primaryTypographyProps:{component:"div"}}),(0,q.jsx)(y.A,{children:(0,q.jsx)(A.A,{edge:"end",onClick:()=>W(e.id),size:"small",color:"error",children:(0,q.jsx)(B.A,{})})})]}),s<O.length-1&&(0,q.jsx)(b.A,{})]},e.id))})]})})]})})]})})}}]);
//# sourceMappingURL=788.8f18696b.chunk.js.map